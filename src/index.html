<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>OpenClaw One-Click</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f4f7f6; color: #333; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        header { background-color: #1a1a1a; color: white; padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .container { flex: 1; padding: 30px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .status-card { background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); padding: 40px; width: 100%; max-width: 500px; text-align: center; }
        .btn { background-color: #007bff; color: white; border: none; padding: 15px 40px; border-radius: 30px; font-size: 18px; cursor: pointer; transition: background 0.3s; box-shadow: 0 4px 15px rgba(0,123,255,0.3); }
        .btn:hover { background-color: #0056b3; }
        .btn:disabled { background-color: #ccc; cursor: not-allowed; }
        #log { width: 100%; max-width: 600px; height: 200px; background: #2c3e50; color: #ecf0f1; border-radius: 8px; padding: 15px; margin-top: 20px; overflow-y: auto; font-family: "Courier New", Courier, monospace; font-size: 12px; text-align: left; }
        .success-icon { font-size: 48px; color: #2ecc71; margin-bottom: 20px; display: none; }
    </style>
</head>
<body>
    <header>
        <h1>OpenClaw 一键部署工具</h1>
    </header>
    <div class="container">
        <div class="status-card" id="main-card">
            <div id="success-icon" class="success-icon">✅</div>
            <h2>欢迎开启 Agent 时代</h2>
            <p id="sub-text">点击下方按钮，我们将为您自动配置本地 OpenClaw 环境。</p>
            <button id="deploy-btn" class="btn" onclick="startDeploy()">立即部署</button>
        </div>
        <div id="log" style="display: none;"></div>
    </div>

    <script>
        const { ipcRenderer } = require('electron');
        const logContainer = document.getElementById('log');
        const deployBtn = document.getElementById('deploy-btn');
        const subText = document.getElementById('sub-text');
        const successIcon = document.getElementById('success-icon');

        function startDeploy() {
            deployBtn.disabled = true;
            deployBtn.innerText = '部署中...';
            logContainer.style.display = 'block';
            ipcRenderer.send('start-deploy');
        }

        ipcRenderer.on('deploy-log', (event, message) => {
            const p = document.createElement('p');
            p.style.margin = '2px 0';
            p.innerText = message;
            logContainer.appendChild(p);
            logContainer.scrollTop = logContainer.scrollHeight;
        });

        ipcRenderer.on('deploy-success', () => {
            deployBtn.style.display = 'none';
            subText.innerText = '部署成功！您的本地 OpenClaw 已就绪。';
            successIcon.style.display = 'block';
        });
    </script>
</body>
</html>
